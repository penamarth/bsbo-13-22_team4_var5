# 1. Регистрация и аутентификация пользователя
- **Название прецедента**: Регистрация и аутентификация пользователя
# Процедура регистрации:

1. **Пользователь вводит свои данные:**
    - Имя (обязательно)
    - Фамилия (опционально или обязательно, в зависимости от требований)
    - Электронная почта (обязательно, используется для идентификации и восстановления доступа)
    - Пароль (обязательно, с проверкой сложности)

2. **Система проверяет введенные данные на валидность:**
    - Электронная почта проверяется на корректность формата.
    - Пароль проверяется на соответствие требованиям безопасности.

3. **В случае успешной валидации:**
    - Создается новая запись пользователя в базе данных.
    - Отправляется подтверждение на указанный email (опционально, в зависимости от политики безопасности).

4. **Пользователь завершает регистрацию, подтвердив свою почту (если требуется).**

---

# Процедура аутентификации:

1. **Пользователь вводит свои учетные данные:**
    - Электронная почта
    - Пароль

2. **Система проверяет:**
    - Наличие пользователя с указанной электронной почтой в базе данных.
    - Совпадение введенного пароля с хранимым (хешированным) значением.

3. **В случае успешной аутентификации:**
    - Пользователь получает доступ к системе.
    - Генерируется и сохраняется токен сессии (например, JWT) для последующего доступа.

4. **При ошибке аутентификации:**
    - Пользователю выводится соответствующее сообщение (например, «Неверный пароль» или «Пользователь не найден»).

5. **Дополнительно:**
    - Реализована функция восстановления пароля через email.
    - Возможна поддержка двухфакторной аутентификации (при необходимости).

---

# Особенности реализации:

1. **База данных:**
    - Хранение пользовательских данных (например, `users`), включая хешированные пароли и дополнительные поля, такие как фамилия.

2. **Технологии безопасности:**
    - Хеширование паролей (например, с использованием bcrypt).
    - Использование защищенного соединения (SSL/TLS).

3. **Дополнительные функции:**
    - Поддержка анонимной регистрации/аутентификации (опционально, как временная функция).
    - Логирование попыток входа для обеспечения безопасности.

---

# Диаграмма последовательности

![image](https://github.com/user-attachments/assets/6df98f65-0cdc-4ae8-b9c6-ec17145e0d81)

```plantuml
@startuml

actor Пользователь
participant Messenger
participant UserStorage
participant User

== Регистрация ==
Пользователь -> Messenger: Ввести данные для регистрации
activate Messenger
Messenger -> Messenger: Проверить валидность данных
alt Данные валидны
Messenger -> UserStorage: Создать запись пользователя
activate UserStorage
UserStorage --> Messenger: Подтверждение создания
Messenger -> User: Создать объект пользователя
activate User
User --> Messenger: Объект пользователя создан
Messenger --> Пользователь: Регистрация успешна
deactivate User
else Данные не валидны
Messenger --> User: Сообщение об ошибке
end

deactivate UserStorage
deactivate Messenger

== Аутентификация ==
Пользователь -> Messenger: Ввести учетные данные
activate Messenger
Messenger -> UserStorage: Найти пользователя по email
activate UserStorage
alt Пользователь найден
UserStorage --> Messenger: Хэш пароля пользователя
Messenger -> Messenger: Проверить пароль
alt Пароль верен
Messenger -> Messenger: Генерировать токен сессии
Messenger --> Пользователь: Аутентификация успешна
else Пароль неверен
Messenger --> Пользователь: Неверный пароль
end
else Пользователь не найден
UserStorage --> Messenger: Пользователь не найден
Messenger --> Пользователь: Пользователь не найден
end

deactivate UserStorage
deactivate Messenger

@enduml

