# Управление профилем и настройками

## Описание прецедента  

**Действующие лица:**  
- **Пользователь**: Человек, использующий мессенджер для общения и управления своими данными.  
- **Система**: Программное обеспечение мессенджера, обеспечивающее выполнение операций по запросу пользователя.  

---

**Цель:**  
Пользователь должен иметь возможность настраивать свой профиль и управлять параметрами приватности для повышения удобства и безопасности использования мессенджера.  

---

### Процедура смены никнейма  

1. **Пользователь** открывает приложение и переходит в раздел настроек профиля.  
2. **Система** отображает текущую информацию профиля, включая никнейм.  
3. **Пользователь** нажимает на поле с никнеймом и вводит новый никнейм.  
4. **Система** проверяет введённый никнейм на соответствие правилам (например, допустимая длина, отсутствие запрещённых символов).  
   - Если никнейм соответствует правилам, **Система** сохраняет изменения.  
   - Если никнейм не соответствует правилам, **Система** отображает сообщение об ошибке и предлагает ввести другой никнейм.  
5. **Система** уведомляет пользователя об успешном изменении никнейма.  

---

### Процедура изменения настроек приватности  

1. **Пользователь** открывает приложение и переходит в раздел настроек приватности.  
2. **Система** отображает текущие параметры приватности (например, кто может видеть профиль, статус "онлайн", отправлять сообщения).  
3. **Пользователь** изменяет параметры, например, выбирает, что статус "онлайн" виден только друзьям.  
4. **Система** проверяет корректность данных и сохраняет изменения.  
5. **Система** уведомляет пользователя о том, что настройки приватности успешно обновлены.  

---

### Особенности реализации  

1. **Обновление данных:**  
   - При изменении никнейма информация обновляется на сервере в профиле пользователя и в клиенте приложения.  
   - Данные о приватности также синхронизируются с сервером, чтобы сохранить их актуальность для всех взаимодействий.  

2. **Валидация данных:**  
   - Правила валидации (например, ограничения на длину и символы никнейма) хранятся на стороне сервера и клиента для обеспечения согласованности.  

3. **Обратная связь:**  
   - В случае успешного изменения данных отображается уведомление.  
   - В случае ошибок система предоставляет пояснения и рекомендации для исправления.  

4. **Реализация интерфейса:**  
   - Интерфейс настроек содержит интуитивно понятные элементы (например, переключатели, текстовые поля).  

---

## Диаграмма последовательности

![image](https://github.com/user-attachments/assets/ba7e7f0a-b820-48d6-a5f4-03f42552bd49)

```plantuml
@startuml

actor Пользователь
participant Messenger
participant UserStorage
participant User
participant UserData

== Смена никнейма ==
Пользователь -> Messenger: Изменить никнейм
activate Messenger
Messenger -> UserStorage: Найти пользователя по ID
activate UserStorage
UserStorage --> Messenger: Пользователь найден
Messenger -> User: Изменить никнейм
activate User
User -> UserData: Проверить и изменить никнейм
activate UserData
alt Никнейм соответствует правилам
UserData -> UserData: Сохранить изменения
UserData --> User: Подтверждение
User --> Messenger: Никнейм обновлён
Messenger --> Пользователь: Никнейм обновлен
else Никнейм не соответствует правилам
UserData --> User: Ошибка
User --> Messenger: Ошибка
Messenger --> Пользователь: Сообщение об ошибке
end

deactivate UserData
deactivate User
deactivate UserStorage
deactivate Messenger

== Изменение настроек приватности ==
Пользователь -> Messenger: Изменить настройки приватности
activate Messenger
Messenger -> UserStorage: Найти пользователя по ID
activate UserStorage
UserStorage --> Messenger: Пользователь найден
Messenger -> User: Изменить настройки приватности
activate User
User -> UserData: Изменить параметры приватности
activate UserData
UserData -> UserData: Сохранить изменения
UserData --> User: Подтверждение
User --> Messenger: Параметры обновлены
Messenger --> Пользователь: Параметры обновлены

deactivate UserData
deactivate User
deactivate UserStorage
deactivate Messenger

@enduml

```
