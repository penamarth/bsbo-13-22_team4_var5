# Прецедент: Управление чатами в мессенджере

## Название
Управление чатами в мессенджере

## Участники
- Пользователь
- Система (Мессенджер)

## Предусловия
- Пользователь должен быть зарегистрирован и авторизован в системе.
- У пользователя должны быть контакты для создания чата.

## Основной сценарий

### 1. Создание чата
1. Пользователь выбирает опцию "Создать чат".
2. Система запрашивает выбор контактов.
3. Пользователь выбирает контакты из списка.
4. Система создает новый чат.
5. Система уведомляет пользователя о создании чата.

### 2. Редактирование чата
1. Пользователь открывает существующий чат.
2. Система отображает информацию о чате.
3. Пользователь выбирает опцию "Редактировать чат".
4. Система отображает опции редактирования.
5. Пользователь изменяет название и участников чата.
6. Пользователь подтверждает изменения.
7. Система обновляет информацию о чате.
8. Система уведомляет участников об изменениях.

### 3. Удаление чата
1. Пользователь открывает чат, который хочет удалить.
2. Система отображает информацию о чате.
3. Пользователь выбирает опцию "Удалить чат".
4. Система запрашивает подтверждение удаления.
5. Пользователь подтверждает удаление.
6. Система удаляет чат из списка.
7. Система уведомляет участников об удалении чата.

### 4. Поиск чатов
1. Пользователь вводит ключевое слово для поиска чатов.
2. Система ищет чаты по введенному ключевому слову.
3. Система отображает список найденных чатов.
4. Пользователь выбирает нужный чат из списка.

## Альтернативные сценарии
- Если пользователь не выбрал ни одного контакта при создании чата, система уведомляет его об этом и предлагает повторить выбор.
- Если пользователь отменяет редактирование, система возвращает его к предыдущему экрану без сохранения изменений.

## Постусловия
- Чат успешно создан, отредактирован или удален в системе в зависимости от выполненных действий пользователя.

# Диаграмма последовательности

![image](https://github.com/user-attachments/assets/917fb87e-a8f9-47db-936f-33790e36c0c6)

```plantuml
@startuml

actor User as "Пользователь"
participant Messenger
participant Chat
participant ChatStorage

== Создание чата ==
User -> Messenger: Создать чат
activate Messenger
Messenger -> User: Запрос выбора контактов
User --> Messenger: Выбор контактов
Messenger -> Chat: Создать экземпляр чата
activate Chat
Chat -> ChatStorage: Сохранить чат
activate ChatStorage
ChatStorage --> Chat: Подтверждение
Chat --> Messenger: Экземпляр чата
Messenger --> User: Подтверждение создания чата

deactivate ChatStorage
deactivate Chat
deactivate Messenger

== Редактирование чата ==
User -> Messenger: Открыть чат
activate Messenger
Messenger -> Chat: Загрузить информацию о чате
activate Chat
Chat --> Messenger: Информация о чате
Messenger --> User: Показать информацию
User -> Messenger: Редактировать чат
Messenger -> Chat: Обновить название и участников
Chat -> ChatStorage: Сохранить изменения
activate ChatStorage
ChatStorage --> Chat: Подтверждение
Chat --> Messenger: Обновления сохранены
Messenger --> User: Подтверждение редактирования
Messenger -> Chat: Уведомить участников

deactivate ChatStorage
deactivate Chat
deactivate Messenger

== Удаление чата ==
User -> Messenger: Удалить чат
activate Messenger
Messenger -> Chat: Запрос подтверждения удаления
activate Chat
Chat --> Messenger: Подтверждение удаления
Messenger -> ChatStorage: Удалить чат
activate ChatStorage
ChatStorage --> Messenger: Подтверждение удаления
Messenger -> User: Чат удалён
Messenger -> Chat: Уведомить участников

deactivate ChatStorage
deactivate Chat
deactivate Messenger

== Поиск чатов ==
User -> Messenger: Ввести ключевое слово
activate Messenger
Messenger -> ChatStorage: Искать чаты по ключевому слову
activate ChatStorage
ChatStorage --> Messenger: Список найденных чатов
Messenger --> User: Показать список
User -> Messenger: Выбрать чат
Messenger -> Chat: Загрузить информацию о выбранном чате
activate Chat
Chat --> Messenger: Информация о чате
Messenger --> User: Показать информацию

deactivate Chat
deactivate ChatStorage
deactivate Messenger

@enduml

```
